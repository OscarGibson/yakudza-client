export class LiqPayCheckout {
	factory(t,e){t.LiqPayCheckout=new function(){var i,o,n=t.encodeURIComponent,r={},a=(new Date).getTime().toString();this.init=function(t){var o=(t.host||"https://www.liqpay.ua/")+(t.language||"ru")+"/checkoutjs";o+="?hostname="+n(location.hostname),o+="&port="+n(location.port),o+="&protocol="+n(location.protocol),o+="&uid="+a;for(var r in t)o+="&"+n(r)+"="+n(t[r]);(i=e.createElement("iframe")).setAttribute("frameborder","0"),i.setAttribute("allowtransparency","true"),i.setAttribute("scrolling","no"),i.setAttribute("style","width:100%;height:0px;background-color:transparent;"),i.setAttribute("src",o);try{"popup"==t.mode?this.popup(i):e.querySelector(t.embedTo||"body").appendChild(i)}catch(t){console.error(t)}return this},this.popup=function(t){(o=e.createElement("div")).innerHTML='<div id="liqpay_widget_popup_container" style="position: fixed !important;top: 0 !important;right: 0 !important;bottom: 0 !important;left: 0 !important;z-index: 3000 !important"><div id="liqpay_widget_popup_background" style="width: 100% !important;height: 100% !important;background: #000 !important;opacity: .4 !important"></div><div id="liqpay_widget_popup_iframe" style="position: absolute !important;\ttop: 50% !important;left: 50% !important;width: 385px !important;border-radius: 6px !important;\ttransform: translate(-50%, -50%) !important;-moz-transform: translate(-50%, -50%) !important;-ms-transform: translate(-50%, -50%) !important;-webkit-transform: translate(-50%, -50%) !important;-o-transform: translate(-50%, -50%) !important"></div></div>',e.querySelector("body").appendChild(o),e.querySelector("#liqpay_widget_popup_iframe").appendChild(t)},this.on=function(t,e){if("function"==typeof e)return t in r||(r[t]=[]),r[t].push(e),this},this.off=function(t,e){if(t in r){for(var i=[],o=0;o<r[t].length;o++)r[t][o]!=e&&i.push(r[t][o]);return r[t]=i,this}},this.call=function(t,e){if(t in r){for(var i=0;i<r[t].length;i++)r[t][i](e);return this}};var p=function(t){if("object"!=typeof t.data)try{var e=JSON.parse(t.data);if(!e)return;if(e.uid!=a)return;this.call(e.params.cmd,e.params),this.call("_",e.params)}catch(t){}}.bind(this);t.addEventListener?t.addEventListener("message",p,!1):t.attachEvent("onmessage",p),this.on("window.resize",function(t){i.style.height=t.height+"px"}),this.on("window.redirect",function(t){e.location.href=t.redirect_to}),this.on("window.html_add",function(t){var i=e.createElement("div");i.innerHTML=t.html,e.querySelector(t.container).appendChild(i)}),this.on("window.html_remove",function(t){try{var i=e.querySelector(t.selector);i.parentNode.removeChild(i)}catch(t){}}),this.on("liqpay.close",function(){i.parentNode.removeChild(i),o&&o.parentNode.removeChild(o)})},t.LiqPayCheckoutCallback&&t.LiqPayCheckoutCallback()};
	constructor() {
		this.factory(window, document);
		this.liqPayCheckout = window.LiqPayCheckout;
	}
}